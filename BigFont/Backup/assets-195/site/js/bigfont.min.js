
ï»¿(function(){'use strict';var BASE_URL,BOOTSTRAP_COLLAPSE_HIDE_DURATION;BASE_URL=window.location.protocol+'//'+window.location.hostname+':'+window.location.port;BOOTSTRAP_COLLAPSE_HIDE_DURATION=195;function setupTheAnchorElementNonLinkBehavior(){$("a.non-link").click(function(e){e.preventDefault();e.stopPropagation();return false;});}
function refreshScrollSpy(){$('[data-spy="scroll"]').each(function(){var $spy=$(this).scrollspy('refresh');});}
function expandTheCollapsingContactFormBySectionHash(hash){$('section'+hash+' '+'.collapse').collapse('show');}
function setupTheCollapsingContactForm(){var div,button,strong,span,forms,form,isValid,validator,jqxhr,scrollTopBefore,offsetTopBefore,scrollTopAfter,offsetTopAfter;function repositionTheCollapsingContactForm(form){scrollTopBefore=$('html,body').scrollTop();scrollTopAfter=scrollTopBefore-form.height();$('html,body').animate({scrollTop:scrollTopAfter},BOOTSTRAP_COLLAPSE_HIDE_DURATION,'swing');}
forms=$('form.contact-form');forms.children('.collapse').bind('shown hidden',function(){window.setTimeout(refreshScrollSpy,BOOTSTRAP_COLLAPSE_HIDE_DURATION);});forms.children('.collapse').bind('show',function(){scrollTopBefore=$('html,body').scrollTop();offsetTopBefore=$(this).offset().top;$(".alert").alert();forms.find('.alert').alert('close');$('.collapse.in').height(0).removeClass('in');offsetTopAfter=$(this).offset().top;scrollTopAfter=scrollTopBefore-(offsetTopBefore-offsetTopAfter);$('html,body').scrollTop(scrollTopAfter);});forms.children('.collapse').bind('shown',function(){$(this).find('[name=fromEmail]').focus();});forms.children('.collapse').bind('hidden',function(){form=$(this).parents('form');form.validate().resetForm();form[0].reset();});$.each(forms,function(i){form=$(forms[i]);validator=form.validate({rules:{fromEmail:{required:true,email:true},fromName:"required",subject:"required",body:"required"},messages:{fromEmail:{required:'Please provide your email.',email:'Please provide a valid email.'},fromName:"Please provide your name.",subject:"Please provide a subject.",body:"Please type a message."},invalidHandler:function(form,validator){$(validator.errorList[0].element).focus();}});});forms.find('button[type=reset]').click(function(){form=$(this).parents('form');repositionTheCollapsingContactForm(form);});forms.find('button[type=submit]').click(function(){form=$(this).parents('form');isValid=form.valid();if(isValid){div=$('<div/>',{'class':'alert alert-success'});button=$('<button/>',{type:'button','class':'close','data-dismiss':'alert',html:'x'});strong=$('<strong/>',{html:'Thank you.&nbsp'});span=$('<span/>',{html:'We will reply shortly.'});div.append(button);div.append(strong);div.append(span);form.append(div);repositionTheCollapsingContactForm(form);}
return isValid;});forms.submit(function(){form=$(this);jqxhr=$.ajax({type:form.attr('method'),url:BASE_URL+form.attr('action'),data:form.serialize(),contentType:'application/x-www-form-urlencoded',dataType:'text'});return false;});}
function getParameterByName(name){var regexS,regex,results,parameterValue;name=name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");regexS="[\\?&]"+name+"=([^&#]*)";regex=new RegExp(regexS);results=regex.exec(window.location.search);if(results===null){parameterValue="";}
else{parameterValue=decodeURIComponent(results[1].replace(/\+/g," "));}
return parameterValue;}
function respondToQueryStringActionParameter(){var action,hash;action=getParameterByName('action');if(action==='email'){hash=window.location.hash;expandTheCollapsingContactFormBySectionHash(hash);}}
function setupNavigationClickHandler(){var collapsible,href,doDefault;$('nav#sub-nav a').click(function(e){collapsible=$('.in.collapse');if(collapsible.length>0){href=$(this).attr('href');collapsible.collapse('hide');window.setTimeout(function(){window.location.hash=href;},(BOOTSTRAP_COLLAPSE_HIDE_DURATION*2));e.preventDefault();doDefault=false;}});return doDefault;}
$(document).ready(function(){setupTheAnchorElementNonLinkBehavior();setupTheCollapsingContactForm();respondToQueryStringActionParameter();setupNavigationClickHandler();});}());